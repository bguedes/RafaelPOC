g.V().as('person').hasLabel('person').has('id', eq(personId)).emit(__.loops().is(gte(1))).repeat(__.bothE('knows').dedup().by(__.path()).as('  UNNAMED29').otherV()).times(2).simplePath().from('person').as('friend').hasLabel('person').inE('hasMember').has('joinDate', gt(minDate)).outV().as('forum').hasLabel('forum').where(__.select('person').where(neq('friend'))).optional(__.select(all, '  UNNAMED29').as('  UNNAMED29')).select('friend', 'forum').project('friend', 'forum').by(__.select('friend')).by(__.select('forum')).dedup().as('  GENERATED3').select('friend').as('friend').select('  GENERATED3').select('forum').as('forum').choose(__.select('friend').is(neq('  cypher.null')).inE('hasCreator').outV().as('post').hasLabel('Post').inE('CONTAINER_OF').outV().as('  GENERATED9').where(__.select('  GENERATED9').where(eq('forum'))), __.select('friend').is(neq('  cypher.null')).inE('HAS_CREATOR').outV().as('post').hasLabel('Post').inE('CONTAINER_OF').outV().as('  GENERATED9').where(__.select('  GENERATED9').where(eq('forum'))), __.constant('  cypher.null').as('post')).select('forum', 'post').group().by(__.select('forum')).by(__.fold().project('forum', 'postCount').by(__.unfold().select('forum')).by(__.unfold().select('post').is(neq('  cypher.null')).count())).unfold().select(values).as('  GENERATED10').select('forum').as('forum').select('  GENERATED10').select('postCount').as('postCount').select('forum', 'postCount').project('forumTitle', 'postCount').by(__.select('forum').choose(neq('  cypher.null'), __.choose(__.values('title'), __.values('title'), __.constant('  cypher.null')))).by(__.select('postCount')).order().by(__.select('postCount'), desc).by(__.select('forum').choose(neq('  cypher.null'), __.choose(__.values('id'), __.values('id'), __.constant('  cypher.null'))), asc).limit(20)